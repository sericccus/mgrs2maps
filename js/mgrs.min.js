!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).mgrs={})}(this,(function(e){"use strict";const t=65,r=73,n=79;function o(e){return e*(Math.PI/180)}function a(e){return e/Math.PI*180}function i(e){const t=e.northing,r=e.easting,{zoneLetter:n,zoneNumber:o}=e;if(o<0||o>60)return null;const s=6378137,c=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),h=r-5e5;let f=t;n<"N"&&(f-=1e7);const l=6*(o-1)-180+3,u=f/.9996/6367449.145945056,d=u+(3*c/2-27*c*c*c/32)*Math.sin(2*u)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*u)+151*c*c*c/96*Math.sin(6*u),b=s/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),M=Math.tan(d)*Math.tan(d),g=.006739496752268451*Math.cos(d)*Math.cos(d),w=.99330562*s/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),p=h/(.9996*b);let y=d-b*Math.tan(d)/w*(p*p/2-(5+3*M+10*g-4*g*g-.06065547077041606)*p*p*p*p/24+(61+90*M+298*g+45*M*M-1.6983531815716497-3*g*g)*p*p*p*p*p*p/720);y=a(y);let m,A=(p-(1+2*M+g)*p*p*p/6+(5-2*g+28*M-3*g*g+.05391597401814761+24*M*M)*p*p*p*p*p/120)/Math.cos(d);if(A=l+a(A),"number"==typeof e.accuracy){const t=i({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});m={top:t.lat,right:t.lon,bottom:y,left:A}}else m={lat:y,lon:A};return m}function s(e){if(e<=84&&e>=72)return"X";if(e<72&&e>=-80){const t=8,r=-80;return"CDEFGHJKLMNPQRSTUVWX"[Math.floor((e-r)/t)]}return e>84||e<-80?"Z":void 0}function c(e){let t=e%6;return 0===t&&(t=6),t}function h(e){if(e&&0===e.length)throw new TypeError("MGRSPoint coverting from nothing");e=e.replace(/ /g,"");const{length:o}=e;let a,i=null,s="",h=0;for(;!/[A-Z]/.test(a=e.charAt(h));){if(h>=2)throw new Error("MGRSPoint bad conversion from: "+e);s+=a,h++}const l=parseInt(s,10);if(0===h||h+3>o)throw new Error("MGRSPoint bad conversion from "+e);const u=e.charAt(h++);if(u<="A"||"B"===u||"Y"===u||u>="Z"||"I"===u||"O"===u)throw new Error(`MGRSPoint zone letter ${u} not handled: ${e}`);i=e.substring(h,h+=2);const d=c(l),b=function(e,o){let a="AJSAJS".charCodeAt(o-1),i=1e5,s=!1;for(;a!==e.charCodeAt(0);){if(a++,a===r&&a++,a===n&&a++,a>90){if(s)throw new Error("Bad character: "+e);a=t,s=!0}i+=1e5}return i}(i.charAt(0),d);let M=function(e,o){if(e>"V")throw new TypeError("MGRSPoint given invalid Northing "+e);let a="AFAFAF".charCodeAt(o-1),i=0,s=!1;for(;a!==e.charCodeAt(0);){if(a++,a===r&&a++,a===n&&a++,a>86){if(s)throw new Error("Bad character: "+e);a=t,s=!0}i+=1e5}return i}(i.charAt(1),d);for(;M<f(u);)M+=2e6;const g=o-h;if(g%2!=0)throw new Error("MGRSPoint has to have an even number\nof digits after the zone letter and two 100km letters - front\nhalf for easting meters, second half for\nnorthing meters "+e);const w=g/2;let p,y,m,A=0,k=0;w>0&&(p=1e5/Math.pow(10,w),y=e.substring(h,h+w),A=parseFloat(y)*p,m=e.substring(h+w),k=parseFloat(m)*p);return{easting:A+b,northing:k+M,zoneLetter:u,zoneNumber:l,accuracy:p}}function f(e){let t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw new TypeError("Invalid zone letter: "+e)}e.forward=function(e,a){if(a="number"==typeof a?a:5,!Array.isArray(e))throw new TypeError("forward did not receive an array");if("string"==typeof e[0]||"string"==typeof e[1])throw new TypeError("forward received an array of strings, but it only accepts an array of numbers.");const[i,h]=e;if(i<-180||i>180)throw new TypeError("forward received an invalid longitude of "+i);if(h<-90||h>90)throw new TypeError("forward received an invalid latitude of "+h);if(h<-80||h>84)throw new TypeError(`forward received a latitude of ${h}, but this library does not support conversions of points in polar regions below 80°S and above 84°N`);return function(e,o){const a="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function(e,o,a){const i=c(a),s=Math.floor(e/1e5),h=Math.floor(o/1e5)%20;return function(e,o,a){const i=a-1,s="AJSAJS".charCodeAt(i),c="AFAFAF".charCodeAt(i);let h=s+e-1,f=c+o,l=!1;h>90&&(h=h-90+t-1,l=!0);(h===r||s<r&&h>r||(h>r||s<r)&&l)&&h++;(h===n||s<n&&h>n||(h>n||s<n)&&l)&&(h++,h===r&&h++);h>90&&(h=h-90+t-1);f>86?(f=f-86+t-1,l=!0):l=!1;(f===r||c<r&&f>r||(f>r||c<r)&&l)&&f++;(f===n||c<n&&f>n||(f>n||c<n)&&l)&&(f++,f===r&&f++);f>86&&(f=f-86+t-1);return String.fromCharCode(h)+String.fromCharCode(f)}(s,h,i)}(e.easting,e.northing,e.zoneNumber)+a.substr(a.length-5,o)+i.substr(i.length-5,o)}(function(e){const t=e.lat,r=e.lon,n=6378137,a=o(t),i=o(r);let c;c=Math.floor((r+180)/6)+1,180===r&&(c=60);t>=56&&t<64&&r>=3&&r<12&&(c=32);t>=72&&t<84&&(r>=0&&r<9?c=31:r>=9&&r<21?c=33:r>=21&&r<33?c=35:r>=33&&r<42&&(c=37));const h=o(6*(c-1)-180+3),f=n/Math.sqrt(1-.00669438*Math.sin(a)*Math.sin(a)),l=Math.tan(a)*Math.tan(a),u=.006739496752268451*Math.cos(a)*Math.cos(a),d=Math.cos(a)*(i-h),b=n*(.9983242984503243*a-.002514607064228144*Math.sin(2*a)+2639046602129982e-21*Math.sin(4*a)-3.418046101696858e-9*Math.sin(6*a)),M=.9996*f*(d+(1-l+u)*d*d*d/6+(5-18*l+l*l+72*u-.39089081163157013)*d*d*d*d*d/120)+5e5;let g=.9996*(b+f*Math.tan(a)*(d*d/2+(5-l+9*u+4*u*u)*d*d*d*d/24+(61-58*l+l*l+600*u-2.2240339282485886)*d*d*d*d*d*d/720));t<0&&(g+=1e7);return{northing:Math.trunc(g),easting:Math.trunc(M),zoneNumber:c,zoneLetter:s(t)}}({lat:h,lon:i}),a)},e.getLetterDesignator=s,e.inverse=function(e){const t=i(h(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},e.toPoint=function(e){if(""===e)throw new TypeError("toPoint received a blank string");const t=i(h(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mgrs.min.js.map
